pipeline{
    agent any
    tools{
        maven 'M3'
        jdk 'jdk1.8.0_271'
    }
    stages{
        stage('Entrada'){
            steps{
               echo 'inicio pipeline'
            }
        }
        stage('descargar git'){
            steps{
               git 'https://github.com/SilvanoGil/curso_integracion_continua.git'
            }
        }
        stage('build'){
            steps{
              // bat 'mvn -B clean verify'
               bat 'mvn -B clean pmd:pmd checkstyle:checkstyle package'
            }
        }
        stage('guardar artefactos'){
            steps{
                archiveArtifacts artifacts: '**/*.war', followSymlinks: false
            }
        }
        stage('deploy'){
            steps{
               deploy adapters: [tomcat8(credentialsId: '9bf271f5-0b79-43c8-84d4-8c3a8679c555', path: '', url: 'http://localhost:8007/')], contextPath: null, war: '**/*.war'
            }
        }
    }
